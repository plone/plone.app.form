Plone zope.formlib Integration
==============================

plone.app.form used to apply a patch to formlib to ensure it could be
used from Zope 2. It appears this patch is no longer necessary, however. We
keep this test to demonstrate that it continues to work.

  >>> from zope import interface, schema
  >>> from zope.formlib import form
  >>> from plone.app.form import _patches
  >>> from Products.Five import traversable

  >>> class IFoo(interface.Interface):
  ...     var1 = schema.TextLine(title=u'var1')
  ...     var2 = schema.Bool(title=u'var2')
  >>> class Foo(object):
  ...     interface.implements(IFoo)
  ...     var1 = u''
  ...     var2 = False
  >>> class BarForm(form.EditForm):
  ...     form_fields = form.FormFields(IFoo)

  >>> request = traversable.FakeRequest()
  >>> foo = Foo()
  >>> bar = BarForm(foo, request)
  >>> bar.adapters = {}
  >>> action = bar.actions[u'form.actions.apply']

Now we see if we can use EditFormBase's apply action (we couldn't 
before).

  >>> bar = BarForm(foo, request)
  >>> bar.adapters = {}
  >>> action = bar.actions[u'form.actions.apply']
  >>> action.success_handler(bar, None, {'var1': 'bbbb', 'var2': False})
  >>> foo.var1
  'bbbb'
  >>> foo.var2
  False
