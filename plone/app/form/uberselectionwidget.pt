<tal:widget i18n:domain="plone">

<fieldset tal:define="fieldname string:${options/name}.query">
  
  <legend>
    <label for="fieldname" tal:content="view/label">choose</label>
  </legend>

  <p class="discreet" tal:content="view/hint"></p>

  <input type="text"
         value=""
         tal:attributes="name string:${options/name}.query;
                         id string:${options/name}.query;
                         value request/fieldname | nothing" />

  <input type="submit"
         value="Search"
         i18n:attributes="value"
         tal:attributes="name string:${options/name}.search" />

  <fieldset tal:condition="options/results | nothing">
    <legend>Search results</legend>
    <ul>
      <li tal:repeat="term options/results">
        <input type="checkbox"
               tal:attributes="name string:${options/name}.selection:list;
                               value term/token" />
        <span tal:replace="term/title">title</span>
      </li>
    </ul>
    <input type="submit"
           value="Apply"
           tal:attributes="name string:${options/name}.apply" />
  </fieldset>

  <div tal:repeat="term options/value">
    <input type="checkbox"
           checked="checked"
           tal:attributes="name string:${options/name}.selection:list;
                           value term/token" />
    <span tal:content="term/title" />
  </div>

  <input type="hidden" value="y"
         tal:attributes="name string:${options/name}.displayed" />

</fieldset>

</tal:widget>
